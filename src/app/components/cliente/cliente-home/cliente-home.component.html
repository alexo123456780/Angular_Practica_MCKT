<div class="cliente-marketplace">

    <section class="cliente-header">

        <div class="header-background"></div>

        <div class="header-content">

            <h1 class="welcome-title animate__animated animate__fadeInDown">MMTK-MARQUET</h1>

            <div class="user-profile animate__animated animate__fadeIn animate__delay-1s flex items-center justify-center mb-4" >

                <div class="profile-image-container rounded-full overflow-hidden border-2 border-white shadow-lg">

                    <img *ngIf="foto_perfil" [src]="foto_perfil" alt="foto_cliente" class="h-full w-full object-cover" >
                    <div *ngIf="!foto_perfil" class="h-full w-full bg-gradient-to-br from-blue-400 to-cyan-300 flex items-center justify-center text-white font-bold text-2xl">

                        {{nombre_cliente.charAt(0).toUpperCase()}}
                    </div>

                </div>

                <p class="welcome-subtitle">Que gusto verte de nuevo, {{nombre_cliente}}, ¿Qué deseas comprar hoy?</p>

            </div>

            <div class="hero-actions animate__animated animate__fadeInUp animate__delay-1s">

                <button class="action-button primary-action" (click)="rutaCarrito()">

                    <svg xmlns="http://www.w3.org/2000/svg" class="button-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M1 1.75A.75.75 0 0 1 1.75 1h1.628a1.75 1.75 0 0 1 1.734 1.51L5.18 3a65.25 65.25 0 0 1 13.36 1.412.75.75 0 0 1 .58.875 48.645 48.645 0 0 1-1.618 6.2.75.75 0 0 1-.712.513H6a2.503 2.503 0 0 0-2.292 1.5H17.25a.75.75 0 0 1 0 1.5H2.76a.75.75 0 0 1-.748-.807 4.002 4.002 0 0 1 2.716-3.486L3.626 2.716a.25.25 0 0 0-.248-.216H1.75A.75.75 0 0 1 1 1.75ZM6 17.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM15.5 19a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" />
                      </svg>

                      Ver Carrito
                </button>

                <button class="action-button primary-action" (click)="rutaInfoCliente()">

                    <svg xmlns="http://www.w3.org/2000/svg" class="button-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-5.5-2.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10 12a5.99 5.99 0 0 0-4.793 2.39A6.483 6.483 0 0 0 10 16.5a6.483 6.483 0 0 0 4.793-2.11A5.99 5.99 0 0 0 10 12Z" clip-rule="evenodd" />
                      </svg>
                      Ver Perfil

                </button>


                <button class="action-button secondary-action">
                    <svg xmlns="http://www.w3.org/2000/svg" class="button-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" clip-rule="evenodd" />
                      </svg>
                      Cambiar foto de perfil
                </button>


                <button class="action-button secondary-action" (click)="rutaPasswors()">

                  <svg xmlns="http://www.w3.org/2000/svg" class="button-icon" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" clip-rule="evenodd" />
                    </svg>
                    Cambiar  password

              </button>

            </div>



            <div class="hero-stats animate__animated animate__fadeIn animate__delay-2s">
                <div class="stat-item">
                  <span class="stat-value">1000+</span>
                  <span class="stat-label">Nuestra meta de productos</span>
                </div>
                <div class="stat-item">
                  <span class="stat-value">500+</span>
                  <span class="stat-label">Nuestra  meta de clientes</span>
                </div>
                <div class="stat-item">
                  <span class="stat-value">24/7</span>
                  <span class="stat-label">Soporte por Alejandro Magana Lopez</span>
                </div>
              </div>

        </div>

    </section>

    <div class="main-content">

        <div class="filters-container animate__animated animate__fadeIn animate__delay-1s">
            <div class="filters-header">
              <h2 class="section-title">Explora nuestros productos</h2>
              <p class="section-subtitle">Encuentra lo que buscas con nuestros filtros</p>
            </div>


            <div class="filters-section">

                <div class="search-box">

                    <svg xmlns="http://www.w3.org/2000/svg" class="search-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                      </svg>

                      <input type="text"
                      class="search-input"
                      placeholder="Busca tu producto"
                      [(ngModel)]="busqueda"
                      (input)="metodoBusqueda($event)"
                      >
                </div>

                <div class="filters-actions">
                    <div class="sort-container">

                        <label for="sort-select" class="sort-label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="sort-icon" viewBox="0 0 20 20" fill="currentColor">
                              <path d="M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z" />
                            </svg>
                          </label>

                          <select id="sort-select" class="sort-select" [(ngModel)]="ordenSeleccionado" (change)="metodoOrdenamiento($event)">

                            <option value="">Ordenar por</option>

                            <option value="precio_asc">Precio: Menor a Mayor</option>

                            <option value="precio_des">Precio: Mayor a Menor</option>

                            <option value="nombre_asc">Nombre: A - Z</option>

                            <option value="nombre_des">Nombre: Z - A</option>

                          </select>
                    </div>

                    <button class="logout-button" (click)="cerrarSesion()">

                        <svg xmlns="http://www.w3.org/2000/svg" class="logout-icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1H3zm11 3a1 1 0 10-2 0v4.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L14 10.586V6z" clip-rule="evenodd" />
                          </svg>

                          Cerrar Sesión
                    </button>

                </div>

            </div>


            <div class="category-section">

                <h3 class="section-subtitle mb-4">Categorías</h3>

                <div class="categories-grid">

                    <div class="category-card" [class.active]="!categoriaSeleccionada" (click)="metodoFiltarCategorias(null)">

                        <div class="category-image-container">
                            <img src="https://mensandbeauty.com/wp-content/uploads/2019/07/moda-para-hombre-prendas-calzado-ropa-complementos-accesorios-4.jpg" alt="Todas las categorías" class="category-image">
                        </div>

                        <p class="category-name">Todas las categorías</p>

                    </div>

                    <div *ngFor="let categoria of categorias" 

                    class="category-card"
                    [class.active]="categoriaSeleccionada === categoria.id"
                    (click)="metodoFiltarCategorias(categoria.id)"
                    
                    >

                    <div class="category-image-container">

                        <img [src]="categoria.imagen_categoria" [alt]="categoria.nombre_categoria" class="category-image">

                    </div>

                    <p class="category-name">{{categoria.nombre_categoria}}</p>

                    </div>

                </div>

            </div>

            <div class="products-container animate__animated animate__fadeIn animate__delay-1s" >

                <div class="products-grid">

                    <div *ngFor="let producto of productosFiltrados; let i = index" class="product-card-wrapper animate__animated animate__fadeInUp" [style.animation-delay]="(i * 0.1) + 's'">

                        <div class="product-card">

                            <div class="product-badges">

                                <div class="product-badge new" *ngIf="i % 5 === 0">NUEVO</div>
                                <div class="product-badge discount" *ngIf="i % 3 === 0">20% OFF</div>
                                <div class="product-badge shipping" *ngIf="i % 2 === 0">

                                    <svg xmlns="http://www.w3.org/2000/svg" class="shipping-icon" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" />
                                        <path d="M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1v-5h2.05a2.5 2.5 0 014.9 0H19a1 1 0 001-1v-4a1 1 0 00-.293-.707l-2-2A1 1 0 0017 2h-3a1 1 0 00-1 1v1H6a1 1 0 00-1 1v1H3a1 1 0 00-1 1zm7 8a2 2 0 012 2h-4a2 2 0 012-2z" />
                                      </svg>
                                      Envío gratis    

                            </div>

                        </div>

                        <div class="product-image">

                            <img [src]="producto.imagen_producto" [alt]="producto.nombre_producto">

                            <div class="product-actions">
                                <button class="action-button favorite">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="action-icon" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
                                      </svg>
                                </button>

                                <button class="action-button share">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="action-icon" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />
                                      </svg>

                                </button>

                            </div>


                        </div>


                        <div class="product-info">

                            <div class="product-category">{{obtenerNombreCategoria(i,producto)}}</div>

                            <h3 class="product-title">{{producto.nombre_producto}}</h3>

                            <div class="product-rating">
                                <div class="stars">
                                  <svg *ngFor="let star of [1,2,3,4,5]" xmlns="http://www.w3.org/2000/svg" [class.filled]="star <= (i % 5 + 1)" class="star-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                  </svg>
                                </div>

                                <span class="reviews-count">({{producto.cantidad_productos}})</span>
                        </div>

                        <p class="product-price">

                          ${{producto.precio_producto}}

                        </p>

                        <p class="product-description">{{producto.descripcion}}</p>
                        <div class="product-buttons">
                            <button class="buy-button">Comprar ahora</button>
                            <button class="cart-button" (click)="agregarProductoCarro(producto.id)">
                                <svg xmlns="http://www.w3.org/2000/svg" class="cart-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" />
                                </svg>
                                Añadir
                            </button>
                        </div>
                    </div>
                </div>
            </div>

    </div>


       <!-- Mensaje si no hay productos -->
       <div class="no-products" *ngIf="productosFiltrados.length === 0">
        <svg xmlns="http://www.w3.org/2000/svg" class="empty-icon" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z" clip-rule="evenodd" />
        </svg>
        <h3>No se encontraron productos</h3>
        <p>Intenta con otra búsqueda o explora otras categorías</p>
      </div>

</div>

    <!-- Mensaje de error -->
    <div *ngIf="errorMensaje" class="error-message">
        <p>{{ errorMensaje }}</p>
    </div>

    <!-- Mensaje de éxito -->
    <div *ngIf="mensajeExito" class="success-message">
        <p>{{ mensajeExito }}</p>
    </div>

</div>